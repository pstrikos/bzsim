// Simple system with 2 OOO cores running a single process
// Private L2, and distributed 4-bank L3 both connected to the NoC
// DRAMSim2 is used for memory simulation
sys = {
    cores = {
        simpleCore = {
            type = "OOO";
            cores = 2;
            dcache = "l1d";
            icache = "l1i";
        };
    };

    lineSize = 64;

    caches = {
        l1d = {
            caches = 2;
            size = 65536;
        };
        l1i = {
            caches = 2;
            size = 32768;
        };
        l2 = {
            caches = 2;
            size = 2097152;
            children = "l1i|l1d";
            netcoord = "2,0 2,1";
        };
        l3 = {
            caches = 1;
            banks = 4;
            size = 67108864;
            children = "noc0";
            netcoord = "0,0 0,1 0,2 0,3";
        };
    };

    
    noc = {
        nocSystemIni = "../booksim2/config/mesh.cfg"
	    # noc0 connects l2 and l3
        noc0 = {
            instances = 1; 
            interfaces = 4; # same as l3's number of banks
            parent = "l3";
            children = "l2";
        };
        noc1 = {
            instances = 1; 
            interfaces = 1; # same as number of DRAM controllers
            parent = "dram";
            children = "l3";
        };
    };

    mem = {
        outputDir = "..";
        controllers = 1;
        type = "DRAMSim";
        capacityMB=16384;
    	techIni = "DRAMSim2/ini/DDR3_micron_64M_8B_x4_sg15.ini";
        systemIni = "DRAMSim2/system.ini.example";
        traceName = "DRAMSim2/traces";
        latency = 4;
        netcoord = "1,0";
    };
};

sim = {
    phaseLength = 10000;
    schedQuantum = 50;  // switch threads frequently
    procStatsFilter = "l1.*|l2.*";
};

process0 = {
    #command = "ls -alh --color tests/";
    command = "../benchmarks/NPB3.4.2/NPB3.4-OMP/bin/bt.S.x ";
};
